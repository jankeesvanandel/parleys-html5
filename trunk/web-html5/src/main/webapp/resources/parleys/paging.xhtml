<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://www.parleys.com/jsf/taglib"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h5="http://www.parleys.com/jsf/components/html5"
      xmlns:composite="http://java.sun.com/jsf/composite">

<composite:interface>
    <composite:attribute name="styleClasses" type="java.lang.String" default=""/>
    <composite:attribute name="targetBean" type="com.parleys.server.frontend.web.html5.beans.Paginable" required="true"/>
    <composite:attribute name="render" type="java.lang.String" required="true"/>
</composite:interface>

<composite:implementation>
    <h5:div id="pagingBar" styleClass="pagingBar" style="float: right; position: relative;" rendered="#{pagingBean.isRendered}">
        <h:commandLink action="#{cc.attrs.targetBean.gotoPage(pagingBean.filter, pagingBean.index-pagingBean.paging, pagingBean.paging)}"
                       disabled="#{pagingBean.index le 0}"
                       styleClass="previous paging"
                       title="Previous page"
                       value="&lt;">
            <f:ajax render="#{cc.clientId}:pagingBar #{cc.attrs.render}"/>
        </h:commandLink>
        <ui:repeat value="#{pagingBean.pages}" var="page">
            <h:commandLink action="#{cc.attrs.targetBean.gotoPage(pagingBean.filter, (page-1)*pagingBean.paging, pagingBean.paging)}"
                           styleClass="#{p:floor(pagingBean.index/pagingBean.paging) eq (page-1) ? 'current' : ''} paging"
                           value="#{page}">
                <f:ajax render="#{cc.clientId}:pagingBar #{cc.attrs.render}"/>
            </h:commandLink>
        </ui:repeat>
        <h:commandLink action="#{cc.attrs.targetBean.gotoPage(pagingBean.filter, pagingBean.index+pagingBean.paging, pagingBean.paging)}"
                       disabled="#{pagingBean.index+pagingBean.paging ge pagingBean.totalCount}"
                       styleClass="next paging"
                       title="Next page"
                       value="&gt;">
            <f:ajax render="#{cc.clientId}:pagingBar #{cc.attrs.render}"/>
        </h:commandLink>
    </h5:div>
</composite:implementation>

</html>
